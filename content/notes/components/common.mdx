# Common Components

## AnimationFrame

See [AnimationFrame](../AnimationFrame).

## AsciiTree

Vizualize a tree structure with text using [treeify](https://www.npmjs.com/package/treeify). Currently not in use

import { AsciiTree } from '../../components/common/AsciiTree';

<AsciiTree
  node={{
    oranges: { mandarin: { clementine: null, tangerine: 'so cheap and juicy' } },
    apples: { gala: null, 'pink lady': null },
  }}
/>

```js
<AsciiTree
  node={{
    oranges: { mandarin: { clementine: null, tangerine: 'so cheap and juicy' } },
    apples: { gala: null, 'pink lady': null },
  }}
/>
```

## AsciiTreeDiff

Diff 2 AsciiTrees. Currently not in use

import { AsciiTreeDiff } from '../../components/common/AsciiTreeDiff';

<AsciiTreeDiff
  before={{
    oranges: { mandarin: { clementine: null, tangerine: 'so cheap and juicy' } },
    apples: { gala: null, 'pink lady': null },
  }}
  after={{
    oranges: { mandarin: { clementine: null, tangerine: 'so cheap and juicy!!!!' } },
    apples: { gala: null },
  }}
/>
<br />

```js
<AsciiTreeDiff
  before={{
    oranges: { mandarin: { clementine: null, tangerine: 'so cheap and juicy' } },
    apples: { gala: null, 'pink lady': null },
  }}
  after={{
    oranges: { mandarin: { clementine: null, tangerine: 'so cheap and juicy!!!!' } },
    apples: { gala: null },
  }}
/>
```

## barChart

import barChart from '../../components/common/barChart';
import DShell from '../../components/common/D3Shell';

<DShell
  render={(container) =>
    barChart({
      width: 500,
      height: 300,
      container,
      data: [
        { value: 'A', count: 3 },
        { value: 'B', count: 5 },
        { value: 'C', count: 2 },
      ],
    })
  }
/>
<br />

```js
<DShell
  render={(container) =>
    barChart({
      width: 500,
      height: 300,
      container,
      data: [
        { value: 'A', count: 3 },
        { value: 'B', count: 5 },
        { value: 'C', count: 2 },
      ],
    })
  }
/>
```

## Circle

svg subcomponent to quickly create a circle. Currently only used in NoteCircle which is not in use...

import Circle from '../../components/common/Circle';

<svg width={42} height={42}>
  <Circle fill={'steelblue'} radius={20}>
    <text x={16} y={25}>
      X
    </text>
  </Circle>
</svg>

```js
<svg width={42} height={42}>
  <Circle fill={'steelblue'} radius={20}>
    <text x={16} y={25}>
      X
    </text>
  </Circle>
</svg>
```

TBD: kill?

## Color

import { Color } from '../../components/common/Color';

<Color color={'steelblue'} />

## ConnectedCircle

import ConnectedCircle from '../../components/common/ConnectedCircle';
import ComponentDoc from '../../components/common/ComponentDoc';
import ConnectedCircleDoc from '../../components/common/ConnectedCircle.doc.json';

<ConnectedCircle
  nodeRadius={25}
  r={120}
  nodes={Array(10)
    .fill()
    .map((_, i) => ({
      id: i,
      value: i / 10,
      label: i / 10,
      fill: 'steelblue',
    }))}
  links={[
    [0, 2],
    [2, 4],
    [4, 6, 'red', 10],
    [6, 8],
    [8, 0],
  ].map(([source, target, stroke, strokeWidth]) => ({ source, target, stroke, strokeWidth }))}
/>
<br />

```js
<ConnectedCircle
  nodeRadius={25}
  r={120}
  nodes={Array(10)
    .fill()
    .map((_, i) => ({
      id: i,
      value: i / 10,
      label: i / 10,
      fill: 'steelblue',
    }))}
  links={[
    [0, 2],
    [2, 4],
    [4, 6, 'red', 10],
    [6, 8],
    [8, 0],
  ].map(([source, target, stroke, strokeWidth]) => ({ source, target, stroke, strokeWidth }))}
/>
```

<ComponentDoc json={ConnectedCircleDoc} />

See [Pitch Class Sets](../../pitch-class-sets/), [Tuning Circle](../../3limit-just-intonation/#tuning-circle)

## D3Shell

See barChart

## DynamicFilter

see [DynamicFilter](./DynamicFilter)

## DynamicTable

See [DynamicTable](./DynamicTable), [Parsing iReal Chord Changes](../../ireal-analytics/)

## flatten

helper to flatten nested array. only used in 5limit-just-intonation post.

TBD: move to tuning?

## FormikTest

See [here](../coding/formik).

## FractionCircle

import FractionCircle from '../../components/common/FractionCircle';

svg subcomponent to display fractions:

As frequency ratio:

<svg width={42} height={42}>
  <FractionCircle top={2} bottom={3} radius={20} cx={20} cy={20} />
</svg>
<br />

```js
<svg width={42} height={42}>
  <FractionCircle top={2} bottom={3} radius={20} cx={20} cy={20} />
</svg>
```

As length ration (uses invert):

<svg width={42} height={42}>
  <FractionCircle top={2} bottom={3} radius={20} cx={20} cy={20} invert={true} />
</svg>
<br />

```js
<svg width={42} height={42}>
  <FractionCircle top={2} bottom={3} radius={20} cx={20} cy={20} invert={true} />
</svg>
```

See [Pure Intervals](../../intervals/)

## FunctionPlot

Plots the given function(s). Only used in blog post. Newer version is Plot (see below).

See [Plotting Functions](../../plotting-functions)

TBD: pull into blog post?

## gcd

greatest common denominator, used in [Lambdoma](./Lambdoma)

## harp

import { harp } from '../../components/common/harp.ts';

Little synth to play frequencies / pitches:

<button onClick={() => harp.triggerAttackRelease(440, 1)}>Play</button>

```js
<button onClick={() => harp.triggerAttackRelease(440, 1)}>Play</button>
```

## isPrime

returns true if the given number is prime. Currently unused

TBD: kill?

## JSONViewer

import JSONViewer from '../../components/common/JSONViewer';

simple wrapper around [react-json-view](https://www.npmjs.com/package/react-json-view).

<JSONViewer
  src={{ foo: true }}
  name={false}
  displayObjectSize={false}
  displayDataTypes={false}
  enableClipboard={false}
  collapsed={3}
/>
<br />

```js
<JSONViewer
  src={{ foo: true }}
  name={false}
  displayObjectSize={false}
  displayDataTypes={false}
  enableClipboard={false}
  collapsed={3}
/>
```

## Plot

import { Plot } from '../../components/common/Plot';

<Plot functions={[(x) => Math.sin(x), (x) => Math.cos(x)]} range={{ x: [-Math.PI, Math.PI], y: [-1, 1] }} />

```js
<Plot functions={[(x) => Math.sin(x), (x) => Math.cos(x)]} range={{ x: [-Math.PI, Math.PI], y: [-1, 1] }} />
```

## PolarPlot

import PolarPlot from '../../components/common/PolarPlot';

<PolarPlot maxAngle={2 * Math.PI} radius={1} functions={[(t) => Math.sin(2 * t)]} />
<br />

```js
<PolarPlot maxAngle={2 * Math.PI} radius={1} functions={[(t) => Math.sin(2 * t)]} />
```

## Popover / SimplePopover

import SimplePopover from '../../components/common/Popover';

<SimplePopover placement="left-start">
  <p>Hello</p>
</SimplePopover>
<br />

```js
<SimplePopover placement="left-start">
  <p>Hello</p>
</SimplePopover>
```

Good for component testing, see e.g. [Lambdoma](./Lambdoma).

## SimpleSelect

import SimpleSelect from '../../components/common/SimpleSelect';

<SimpleSelect label="What?" value={'Milk'} onChange={(v) => console.log(v)} values={['Mouse', 'Man', 'Milk']} />
<br />

```js
<SimpleSelect label="What?" value={'Milk'} onChange={(v) => console.log(v)} values={['Mouse', 'Man', 'Milk']} />
```

## Sketch

For p5 sketches. Currently commented out.

TBD: remove?

## Slider

Wraps Material UI slider:

import Slider from '../../components/Slider';

<Slider min={2} max={64} value={20} onChange={(e, partials) => console.log(e, partials)} />

```js
<Slider min={2} max={64} value={20} onChange={(e, partials) => console.log(e, partials)} />
```

## Spiral

import Spiral from '../../components/common/Spiral';

<Spiral
  width={600}
  height={600}
  stroke="gray"
  {...{
    zoom: 0.11,
    spin: 0,
    precision: 4,
    min: 0,
    max: 6,
    strokeWidth: 3,
  }}
/>

See [spirals](../spirals).

## SpiralSettings

See [spirals](../spirals).

## statistics

normalizeProperty -> normalizeNumbers. Only used in DynamicFilter.

TBD: do sth..

## treeMap

treeMap helper for D3Shell

import treeMap from '../../components/common/treeMap';

<DShell
  render={(container) =>
    treeMap(container, {
      children: Array(10)
        .fill()
        .map((_, i) => ({
          name: i + 1,
          value: i + 1,
          id: i,
          selected: i === 2,
          onClick: () => console.log('clicked', i),
        })),
    })
  }
/>

## TreeVisitor

See rhythmical-trees.

TBD: move to rhythmical/tree ?

## useFrame

used in [AnimationFrame](./AnimationFrame).

## useGenerator

see TreeVisitor

## useSynth

see Monochord, Lambdoma, Harmonics, Partials..
