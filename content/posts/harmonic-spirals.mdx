---
title: Harmonic Spirals
date: 2020-04-20
---

import Spiral from "../components/common/Spiral.tsx"
import HarmonicSpiral from "../components/tuning/HarmonicSpiral.tsx"
import SpiralSettings from "../components/common/SpiralSettings.tsx"
import { State } from "react-powerplug"
import Slider from "@material-ui/core/Slider"
import Grid from "@material-ui/core/Grid"
import AnimationFrame from "../components/common/AnimationFrame.tsx"
import { angle, frequencyColor } from "../components/tuning/tuning.ts"
import SimplePopover from "../components/common/Popover"
import * as Tone from "tone"
import canUseDOM from "../components/canUseDOM.ts"
const { PolySynth, Synth } = Tone
const harp =
  canUseDOM() &&
  new PolySynth(6, Synth, {
    volume: -16,
    envelope: { attack: 0.01, decay: 2, sustain: 0, release: 0.1 },
    oscillator: { type: "fmtriangle" },
  }).toMaster()

Let's play [Erv Wilson](http://www.anaphoria.com/harm-subharm.pdf) and create some harmonic spirals.

## Linear Harmonic Spiral

<State
  initial={{
    zoom: 0.11,
    spin: 0,
    precision: 4,
    min: 0,
    max: 6,
    strokeWidth: 3,
    base: 55,
    fontSize: 14,
  }}
>
  {({ state, setState }) => (
    <>
      <div
        style={{
          overflow: "auto",
          maxWidth: 900,
          maxHeight: 700,
          position: "relative",
        }}
      >
        <HarmonicSpiral
          width={600}
          height={600}
          stroke="gray"
          {...state}
          onTrigger={(i) => harp.triggerAttackRelease((i + 1) * state.base, 1)}
        />
        <div style={{ position: "absolute", left: 10, bottom: 30 }}>
          <SimplePopover placement="left-start">
            <div style={{ width: 300 }}>
              <SpiralSettings state={state} setState={setState} />
            </div>
          </SimplePopover>
        </div>
      </div>
    </>
  )}
</State>

- you can think of this as a number line with a twist
- starting at 1 (root pitch) in the center, we map one full rotation (=360 degrees) to the multiplication of 2 (octaves)
- each line starts at an odd number representing the beginning of a new pitch color
- the line extends to infinity, crossing the spiral at octaves of the color
- all natural numbers will be part of a line
- the whole image is a dense visualization of the harmonic series from the perspective of octaves

## Logarithmic Harmonic Spiral

It gets even more accurate (but not as compact) if we use a logarithmic spiral:

<State
  initial={{
    zoom: 0.85,
    spin: 0,
    precision: 0.2,
    min: 5,
    max: 11,
    strokeWidth: 3,
    stroke: "gray",
    width: 600,
    height: 600,
    base: 55,
  }}
>
  {({ state, setState }) => (
    <>
      <div
        style={{
          overflow: "auto",
          maxWidth: 900,
          maxHeight: 700,
          position: "relative",
        }}
      >
        <HarmonicSpiral
          {...state}
          onTrigger={(i) => console.log("trigger", i)}
          getRadius={(angle) =>
            Math.pow(Math.abs(state.zoom) * 2, Math.abs(angle)) *
            Math.abs(state.zoom)
          }
          onTrigger={(i) => harp.triggerAttackRelease((i + 1) * state.base, 1)}
        />
        <div style={{ position: "absolute", left: 10, bottom: 30 }}>
          <SimplePopover placement="left-start">
            <div style={{ width: 300 }}>
              <SpiralSettings
                state={state}
                setState={setState}
                disableZoom={true}
              />
            </div>
          </SimplePopover>
        </div>
      </div>
    </>
  )}
</State>

- Here, the radius gets two times bigger on every rotation.
- This growth represents the behaviour of frequencies, as we go up the harmonic series.
