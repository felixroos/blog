(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{fAGn:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return I}));var o=n("rePB"),c=n("q1tI"),r=n.n(c),i=n("jMTM"),a=n("dy81"),l=(n("E9XD"),n("KQm4")),u=n("jRbR"),s=n("Aso1"),b=function(){function t(){}return t.from=function(t){return"number"==typeof t&&t<0&&(t="b"+-1*t),t+""},t.fromInterval=function(t,e){void 0===e&&(e=!1);var n=p[t]||[];return e?n[1]||n[0]||0:n[0]||0},t.toInterval=function(e){e=t.from(e);var n=Object.keys(p).find((function(t){return p[t].includes(e)}));return n},t}(),p={"1P":["1","8"],"2m":["b9","b2"],"2M":["9","2"],"2A":["#9","#2"],"3m":["b3"],"3M":["3"],"4P":["11","4"],"4A":["#11","#4"],"5d":["b5"],"5P":["5"],"5A":["#5"],"6m":["b13","b6"],"6M":["13","6"],"7m":["b7"],"7M":["7","^7","maj7"]},m=function(){function t(){}return t.fromStep=function(t){var e=(t=b.from(t)).match(/([1-9])+/);return e&&e.length?parseInt(e[0],10):0},t.inChord=function(e,n){n=s.a.getTonalChord(n);var o=a.a.get(n).intervals,c=a.a.tokenize(n);return a.e.transpose(c[0],t.find(e,o))},t.fromInterval=function(t,e){void 0===t&&(t="-1"),void 0===e&&(e=!1);var n=(s.a.reduceInterval(t+"",e)||"").match(/[-]?([1-9])+/);return n?Math.abs(parseInt(n[0],10)):0},t.find=function(e,n){var o=n.map((function(t){return s.a.isInterval(t)?t:b.toInterval(t)}));if("number"==typeof e){var c=Math.abs(e);return o.find((function(e){return e=s.a.minInterval(e,"up"),p[e]||console.error("interval",e,"is not valid",o),!!p[e].find((function(e){return t.fromStep(e)===c}))}))}var r=b.from(e);return o.find((function(t){return t.includes(r)||t===b.toInterval(r)}))},t}();function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j=function(){function t(){}return t.getCombinations=function(e,n){void 0===n&&(n={});var o=s.a.getBassNote(e);if(n.bottomDegrees&&n.bottomDegrees.length&&(n.bottomPitches=(n.bottomPitches||[]).concat(n.bottomDegrees.map((function(t){return t.map((function(t){return m.inChord(t,e)}))})))),n.topDegrees&&n.topDegrees.length&&"number"==typeof n.topDegrees[0])throw new Error("topDegrees should be a double nested array!");return n.topDegrees&&n.topDegrees.length&&(n.topPitches=(n.topPitches||[]).concat(n.topDegrees.map((function(t){return t.map((function(t){return m.inChord(t,e)}))})))),t.absolute(O(O(O({},t.getPitches(e,n)),n),{},{root:o}))},t.absolute=function(e){void 0===e&&(e={});var n=e=O(O({},g),e),o=n.requiredPitches,c=n.optionalPitches,r=n.bottomPitches,i=n.topPitches,b=n.topNotes,p=n.voices,m=n.ignoreLowerIntervalLimits,f=n.bottomDistances,j=n.topDistances,d=n.preferTopDistances,v=e,D=v.range,y=v.defaultDistances,w=[].concat(Object(l.a)(o||[]),Object(l.a)(c||[])),P=(r||[]).map((function(t){return(t||[]).map((function(t){return a.e.chroma(t)}))})),x=(i||[]).map((function(t){return(t||[]).map((function(t){return a.e.chroma(t)}))}));if(!w.length)throw new Error("requiredPitches or optionalPitches must be set!");var M=O(O({},t.getMinMaxNotes(e)),e),C=M.minNotes,A=M.maxNotes;if(p){if(A&&A>p.length)throw new Error("maxNotes cannot be greater than the amount of voices");A=A||p.length,D=[p[0][0],p[p.length-1][1]]}if(!D)throw new Error("no range given");C||(C=w.length),A||(A=w.length);var N=a.g.chromatic(D).filter(s.a.byPitches(w));return u.a.search((function(t,e){if(!t.length)return P.length?N.filter((function(t){return P[0].includes(a.e.chroma(t))})):N;if(t.length>=A)return[];var n,o;f&&f[t.length-1]&&(n=f[t.length-1]),C===A&&j&&j[A-t.length-1]&&(o=j[A-t.length]);var c=[].concat(y);return c=n&&o?d?o:n:n||o||c,N.filter((function(e){var n=a.e.midi(e),o=a.e.midi(t[t.length-1]);return n>o&&(!c[1]||n-o<=c[1])&&(!c[0]||n-o>=c[0])&&(!P[t.length]||P[t.length].includes(a.e.chroma(e)))&&(m||!h[n-o]||n>=a.e.midi(h[n-o]))}))}),(function(e){return!(e.length<C)&&(!(o&&!o.reduce((function(t,n){return t&&!!e.find((function(t){return a.e.chroma(t)===a.e.chroma(n)}))}),!0))&&(!(b&&!b.includes(e[e.length-1]))&&(!(x&&!x.reduce((function(t,n,o){var c=e.length-x.length+o;return c?t&&n.includes(a.e.chroma(e[c])):t}),!0))&&(!(j&&!j.reduce((function(t,n,o){var c=e.length-j.length+o;if(!c)return t;var r=a.e.midi(e[c])-a.e.midi(e[c-1]);return t&&r>=n[0]&&r<=n[1]}),!0))&&!(p&&Array.isArray(p)&&p.length&&Array.isArray(p[0])&&Array.isArray(p[1])&&0===t.allocations(e,p).length)))))}))},t.allocations=function(t,e){var n=e.sort((function(t,e){return a.e.midi(t[1])-a.e.midi(e[1])})).map((function(t,e){return e}));return u.a.search((function(o,c){if(o.length>t.length-1)return[];var r=t[o.length];return n.filter((function(t,c){return!o.includes(c)&&c>n.indexOf(n[o.length-1])&&s.a.isInRange(r,e[c])}))}),(function(e){return e.length===t.length}))},t.getPitches=function(e,n){e=s.a.getTonalChord(e);var o=a.a.get(e).notes;n=O(O({},t.getMinMaxNotes(n)),n);var c=t.getRequiredPitches(e,n.maxNotes),r=o.filter((function(t){return!c.includes(t)}));return{requiredPitches:c,optionalPitches:r}},t.getRequiredPitches=function(e,n){return void 0===n&&(n=2),t.getRequiredNotes(e,n)},t.getRequiredNotes=function(t,e){void 0===e&&(e=2),t=s.a.getTonalChord(t);var n=a.a.get(t).notes,o=a.a.get(t).intervals,c=[3,7,"b5",6].slice(0,Math.max(e,2));m.find(3,o)||c.push(4);var r=c.reduce((function(e,n){return m.find(n,o)&&e.push(m.inChord(n,t)),e}),[]);return e>3&&!r.includes(n[n.length-1])&&r.push(n[n.length-1]),r},t.getMinMaxNotes=function(t){var e,n,o=t.notes||g.notes;if("number"==typeof o)e=o,n=o;else if(Array.isArray(o)){if(o.length<2)throw new Error("notes must be a number or an array with two numbers (max,min)");e=o[0],n=o[1]}if(e>n)throw new Error("minNotes cannot be greater than maxNotes");return{minNotes:e,maxNotes:n}},t.analyze=function(t,e){var n=t.map((function(t){return a.e.get(t).pc})),o=n.map((function(t){return b.fromInterval(a.d.distance(e,t))})),c=t.reduce((function(e,n,o){return o?e.concat([a.d.distance(t[o-1],n)]):[]}),[]),r=c.map((function(t){return a.d.semitones(t)})),i=Math.min.apply(Math,Object(l.a)(r)),u=Math.max.apply(Math,Object(l.a)(r)),s=a.d.distance(t[0],t[t.length-1]),p=a.d.semitones(s),f=Math.floor(p/t.length),O=r.reduce((function(t,e){return t+e}),0)/r.length,j=u-i,g=a.d.fromSemitones(j),h=a.e.midi(t[t.length-1]),d=m.fromInterval(a.d.distance(e,n[n.length-1])),v=m.fromInterval(a.d.distance(e,n[0])),D=a.e.midi(t[0]),y=t.reduce((function(t,e){return t+a.e.midi(e)}),0)/t.length;return{root:e,pitches:n,maxDistance:u,minDistance:i,steps:o,intervals:c,semitones:r,spread:s,semitoneSpread:p,averageDistance:O,leap:g,leapSemitones:j,topMidi:h,bottomMidi:D,midiMedian:y,topDegree:d,bottomDegree:v,avgSpread:f}},t}(),g={range:["C3","C5"],notes:4,rangeBorders:[3,3],maxVoices:4,forceDirection:null,forceBestPick:!1,maxDistance:7,defaultDistances:[1,7],minBottomDistance:3,minTopDistance:2,noTopDrop:!0,noTopAdd:!0,noBottomDrop:!1,noBottomAdd:!1,idleChance:1,logIdle:!1,logging:!0},h={1:"E3",2:"Eb3",3:"C3",4:"Bb2",5:"Bb2",6:"B2",7:"Bb1",8:"F2",9:"F2",10:"F2",11:"F2"},d=n("YPQa"),v=n("b+kA"),D=n("mrVq"),y=n("gj+k"),w=n("A5Xg"),P=n("qKvR");function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){Object(o.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C=i.PolySynth,A=i.Synth,N="undefined"!=typeof window&&new C(32,A,{volume:-12}).toMaster();function I(){var t=Object(c.useState)({wave:"fmsine",sortBy:"topMidi",tonic:"D",symbol:"-9",bottomPitches:"",maxNotes:5,minNotes:5,defaultDistances:"1-7",bottomDistances:"5-15 2-8",topDistances:"3-7",arpeggioInterval:200,bottomDegrees:"1 3,5,7",topDegrees:""}),e=t[0],n=t[1],o=function(t){return function(e){return e.split(t).map((function(t){return parseInt(t)}))}},i=M(M({},e),{},{range:["A1","C5"],notes:[e.minNotes,e.maxNotes]||!1,bottomPitches:e.bottomPitches?e.bottomPitches.split(" "):[],topPitches:e.topPitches?e.topPitches.split(" "):[],bottomDegrees:e.bottomDegrees?e.bottomDegrees.trim().split(" ").map(o(",")):[],topDegrees:e.topDegrees?e.topDegrees.trim().split(" ").map(o(",")):[],bottomDistances:e.bottomDistances?e.bottomDistances.trim().split(" ").map(o("-")):[],topDistances:e.topDistances?e.topDistances.trim().split(" ").map(o("-")):[],defaultDistances:e.defaultDistances?e.defaultDistances.trim().split("-").map(o("-")):[]}),l=j.getCombinations(e.tonic+e.symbol,i),u=[].concat.apply([],l).map((function(t){return a.e.midi(t)})),s=[Object(D.a)(u),Object(y.a)(u)].map((function(t){return a.e.fromMidi(+t)}));return Object(P.c)(w.default,{sidebar:Object(P.c)(r.a.Fragment,null,Object(P.c)("label",null,Object(P.c)("select",{value:e.tonic,onChange:function(t){return n(M(M({},e),{},{tonic:t.target.value}))}},Object(P.c)("option",null,"C"),Object(P.c)("option",null,"C#"),Object(P.c)("option",null,"Db"),Object(P.c)("option",null,"D"),Object(P.c)("option",null,"D#"),Object(P.c)("option",null,"Eb"),Object(P.c)("option",null,"E"),Object(P.c)("option",null,"F"),Object(P.c)("option",null,"F#"),Object(P.c)("option",null,"Gb"),Object(P.c)("option",null,"G"),Object(P.c)("option",null,"G#"),Object(P.c)("option",null,"Ab"),Object(P.c)("option",null,"A"),Object(P.c)("option",null,"A#"),Object(P.c)("option",null,"Bb"),Object(P.c)("option",null,"B")),Object(P.c)("select",{value:e.symbol,onChange:function(t){return n(M(M({},e),{},{symbol:t.target.value}))}},Object(P.c)("option",null,"^"),Object(P.c)("option",null,"sus4"),Object(P.c)("option",null,"sus2"),Object(P.c)("option",null,"2"),Object(P.c)("option",null,"^#5"),Object(P.c)("option",null,"6"),Object(P.c)("option",null,"^7"),Object(P.c)("option",null,"^7#5"),Object(P.c)("option",null,"^7#11"),Object(P.c)("option",null,"^9"),Object(P.c)("option",null,"^9#11"),Object(P.c)("option",null,"^13"),Object(P.c)("option",null,"7"),Object(P.c)("option",null,"7sus4"),Object(P.c)("option",null,"7sus"),Object(P.c)("option",null,"7b5"),Object(P.c)("option",null,"7#5"),Object(P.c)("option",null,"7+"),Object(P.c)("option",null,"7#9"),Object(P.c)("option",null,"7b9"),Object(P.c)("option",null,"7#11"),Object(P.c)("option",null,"7b13"),Object(P.c)("option",null,"7b9b5"),Object(P.c)("option",null,"7b9sus"),Object(P.c)("option",null,"7b9#5"),Object(P.c)("option",null,"7#9b5"),Object(P.c)("option",null,"7b9#9"),Object(P.c)("option",null,"7#9#5"),Object(P.c)("option",null,"7b9b13"),Object(P.c)("option",null,"7b9#11"),Object(P.c)("option",null,"7#9#11"),Object(P.c)("option",null,"9"),Object(P.c)("option",null,"9sus"),Object(P.c)("option",null,"9#5"),Object(P.c)("option",null,"9b5"),Object(P.c)("option",null,"9#11"),Object(P.c)("option",null,"13"),Object(P.c)("option",null,"13sus"),Object(P.c)("option",null,"13#9"),Object(P.c)("option",null,"13b9"),Object(P.c)("option",null,"13#11"),Object(P.c)("option",null,"11"),Object(P.c)("option",null,"-"),Object(P.c)("option",null,"-6"),Object(P.c)("option",null,"-#5"),Object(P.c)("option",null,"-b6"),Object(P.c)("option",null,"-7"),Object(P.c)("option",null,"-^7"),Object(P.c)("option",null,"-9"),Object(P.c)("option",null,"-^9"),Object(P.c)("option",null,"-11"),Object(P.c)("option",null,"h"),Object(P.c)("option",null,"h7"),Object(P.c)("option",null,"-7b5"),Object(P.c)("option",null,"o"),Object(P.c)("option",null,"o7"))," "),Object(P.c)("br",null),Object(P.c)("label",{title:"minimum number of notes"},Object(P.c)("input",{type:"number",min:"1",max:"8",value:e.minNotes,onChange:function(t){return n(M(M({},e),{},{minNotes:t.target.value}))}})," ","-",Object(P.c)("input",{type:"number",min:"1",max:"8",value:e.maxNotes,onChange:function(t){return n(M(M({},e),{},{maxNotes:t.target.value}))}}),"notes"),Object(P.c)("br",null),Object(P.c)("label",{title:"min-max distances between the notes in semitones from the bottom up. all remaining will default to minDistance-maxDistance"},Object(P.c)("input",{type:"text",value:e.bottomDistances,onChange:function(t){return n(M(M({},e),{},{bottomDistances:t.target.value}))}}),"bottomDistances (min0-max0 min1-max1 ...)"," "),Object(P.c)("br",null),Object(P.c)("label",{title:"default min-max distance between notes. in semitones. can be overridden by bottomDistances / topDistances"},Object(P.c)("input",{type:"text",value:e.defaultDistances,onChange:function(t){return n(M(M({},e),{},{defaultDistances:t.target.value}))}})," ","defaultDistances (min-max semitones)"),Object(P.c)("br",null),Object(P.c)("label",{title:"min-max distances between the notes in semitones to the top. all remaining will default to minDistance-maxDistance"},Object(P.c)("input",{type:"text",value:e.topDistances,onChange:function(t){return n(M(M({},e),{},{topDistances:t.target.value}))}})," ","topDistance(s) (... minTop-maxTop)"," "),Object(P.c)("br",null),Object(P.c)("label",{title:"all degree options for the bottom note. number(s, space seperated)"},Object(P.c)("input",{type:"text",value:e.bottomDegrees,onChange:function(t){return n(M(M({},e),{},{bottomDegrees:t.target.value}))}})," ","bottomDegree(s) (1-7)"),Object(P.c)("br",null),Object(P.c)("label",{title:"all degree options for the top note. number(s, space seperated)"},Object(P.c)("input",{type:"text",value:e.topDegrees,onChange:function(t){return n(M(M({},e),{},{topDegrees:t.target.value}))}})," ","topDegree(s) (1-7)"),Object(P.c)("br",null),Object(P.c)("label",{title:"time between each note in ms. choose 0 to play all at once."},Object(P.c)("input",{type:"number",value:e.arpeggioInterval,onChange:function(t){return n(M(M({},e),{},{arpeggioInterval:t.target.value}))},min:"0",max:"1000"}),"arpeggio (ms)"," "),Object(P.c)("br",null),Object(P.c)("label",null,Object(P.c)("select",{value:e.sortBy,onChange:function(t){return n(M(M({},e),{},{sortBy:t.target.value}))}},Object(P.c)("option",{value:"topMidi"},"top note"),Object(P.c)("option",{value:"bottomMidi"},"bottom note"),Object(P.c)("option",{value:"midiMedian"},"median note"),Object(P.c)("option",{value:"topDegree"},"top degree"),Object(P.c)("option",{value:"bottomDegree"},"bottom degree"),Object(P.c)("option",{value:"semitoneSpread"},"spread"),Object(P.c)("option",{value:"avgSpread"},"average spread"),Object(P.c)("option",{value:"leapSemitones"},"leap"),Object(P.c)("option",{value:"maxDistance"},"maxDistance"),Object(P.c)("option",{value:"minDistance"},"minDistance")),"sort by"," "),Object(P.c)("br",null),Object(P.c)("label",null,Object(P.c)("select",{value:e.wave,onChange:function(t){return n(M(M({},e),{},{wave:t.target.value}))}},Object(P.c)("option",{value:"sine"},"sine"),Object(P.c)("option",{value:"triangle"},"triangle"),Object(P.c)("option",{value:"sawtooth"},"sawtooth"),Object(P.c)("option",{value:"square"},"square"),Object(P.c)("option",{value:"pwm"},"pwm"),Object(P.c)("option",{value:"pulse"},"pulse"),Object(P.c)("option",{value:"fmsine"},"fmsine"),Object(P.c)("option",{value:"fmtriangle"},"fmtriangle"),Object(P.c)("option",{value:"fmsawtooth"},"fmsawtooth"),Object(P.c)("option",{value:"fmsquare"},"fmsquare"),Object(P.c)("option",{value:"amsine"},"amsine"),Object(P.c)("option",{value:"amtriangle"},"amtriangle"),Object(P.c)("option",{value:"amsawtooth"},"amsawtooth"),Object(P.c)("option",{value:"amsquare"},"amsquare"),Object(P.c)("option",{value:"fatsine"},"fatsine"),Object(P.c)("option",{value:"fattriangle"},"fattriangle"),Object(P.c)("option",{value:"fatsawtooth"},"fatsawtooth"),Object(P.c)("option",{value:"fatsquare"},"fatsquare"))," ","oscillator wave"),Object(P.c)("br",null),Object(P.c)("strong",null,"TBD:"),Object(P.c)("br",null),Object(P.c)("ul",null,Object(P.c)("li",null,"Beautify Interface"),Object(P.c)("li",null,"Steps are buggy - test"),Object(P.c)("li",null,"Reimplement rules, use array of objects with voices as selector")),Object(P.c)("a",{href:"../"},"Go back to blog")),main:Object(P.c)(r.a.Fragment,null,Object(P.c)(v.a,{heading:Object(P.c)(r.a.Fragment,null,l.length," voicings found"),cols:[{property:"keys",resolve:function(t){return t},display:function(t){return Object(P.c)("div",{onMouseDown:function(e){e.stopPropagation(),e.preventDefault(),N.triggerAttack(t)},onMouseUp:function(t){return N.releaseAll()},onMouseLeave:function(t){return N.releaseAll()}},Object(P.c)(d.a,{mouseControl:!1,keyControl:!1,options:{scaleX:.5,scaleY:.5,range:s,colorize:[{keys:t,color:"steelblue"}]}}))}},{property:"structure",resolve:function(t){var n=j.analyze(t,e.tonic),o=n.steps,c=n.intervals;return Object(P.c)(r.a.Fragment,null,t.join(" "),Object(P.c)("br",null),o.join(" "),Object(P.c)("br",null),c.join(" "))}},{property:"spread",resolve:function(t){return j.analyze(t,e.tonic).spread},sort:function(t,e){return a.d.semitones(t)-a.d.semitones(e)}},{property:"leap",resolve:function(t){return j.analyze(t,e.tonic).leap},sort:function(t,e){return a.d.semitones(t)-a.d.semitones(e)}},{property:"midi median",resolve:function(t){return j.analyze(t,e.tonic).midiMedian},sort:function(t,e){return t-e}}],rows:l}))})}}}]);
//# sourceMappingURL=component---src-pages-voicings-index-tsx-3ae53e6970dd1fbf4c7b.js.map